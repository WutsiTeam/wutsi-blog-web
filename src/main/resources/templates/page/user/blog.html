<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<head>
    <div th:replace="components/layout :: head"></div>
</head>

<body class="paper">

    <div th:replace="components/layout :: navbar"></div>

    <div class="container">
        <div class="offset-md-2 col-md-8">
            <!-- Author -->
            <div class="margin-top-2x">
                <div th:replace="components/story :: author(${blog})"></div>
            </div>

            <div th:if="${user.id} == ${blog.id}">
                <!-- Welcome message -->
                <div id="welcome" class="alert alert-success margin-top-2x" th:if="${user.loginCount == 0}">
                    <p th:utext="#{page.me.welcome(${blog.fullName})}">Welcome</p>
                    <div>
                        <a id="btn-create-story" class="btn btn-primary" href="/editor" th:text="#{button.create_first_story}" wutsi-track-event="create_story">Create Story</a>
                        <a id="btn-syndicate-story" class="btn btn-light" href="/me/syndicate" th:text="#{button.syndicate_story}" wutsi-track-event="syndicate_story">Import a Story</a>
                    </div>
                </div>
            </div>

            <!-- Stories -->
            <div class="margin-top-2x">
                <div id="stories"></div>
            </div>
        </div>
    </div>

    <div th:replace="components/layout :: footer"></div>


<script th:inline="javascript">
/*<![CDATA[*/

    var userId = /*[[${blog.id}]]*/'0';
    var showCreatePanel = /*[[${blog.id} == ${user.id}]]*/ 'false';

    $(document).ready(function(){
        wutsi.httpGet('/story/cards?userId=' + userId + '&showCreatePanel=' + showCreatePanel)
            .then(function(html){
                $('#stories').html(html);
            });
    });


/*]]>*/
</script>

</body>
</html>
